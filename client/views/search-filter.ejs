<!-- search-filter.ejs -->
<head>
  <link href="/css/search-filter.css" rel="stylesheet" />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>

<!-- tirar dps -->
<head>
  <link href="/css/home.css" rel="stylesheet" />
</head>

<!-- tirar dps  -->
<div class="white-card p-3">
  <form action="/" method="GET">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="p-0 m-0 fw-bold">FILTRAR</h1>
      <button
        onclick="window.location.href='/search-filter?<%= new URLSearchParams(query).toString() %>'"
        type="submit"
        class="btn-close close-btn pt-1 p-0"
      ></button>
    </div>

    <!-- Categoria -->
    <div class="pe-3">
      <div class="pe-3">
        <button
          class="text-start white-card p-1 px-3 filter-option d-flex justify-content-between align-items-center"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#filtro-categoria"
          aria-expanded="true"
          aria-controls="filtro-categoria"
          id="btn-categoria"
        >
          Categoria
          <i class="bi bi-chevron-down rotate-icon"></i>
        </button>
      </div>

      <div class="collapse show ps-3" id="filtro-categoria">
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Restauração"
          />
          <label class="form-check-label" for="categoria-restauracao"
            >Restauração</label
          >
        </div>

        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Limpeza"
          />
          <label class="form-check-label" for="categoria-limpeza"
            >Limpeza</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Construção"
          />
          <label class="form-check-label" for="categoria-construcao"
            >Construção</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Vendedor"
          />
          <label class="form-check-label" for="categoria-vendedor"
            >Vendedor</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Saúde"
          />
          <label class="form-check-label" for="categoria-saude">Saúde</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Educação"
          />
          <label class="form-check-label" for="categoria-educacao"
            >Educação</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="IT"
          />
          <label class="form-check-label" for="categoria-tecnologia">IT</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Administração"
          />
          <label class="form-check-label" for="categoria-administracao"
            >Administração</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Transporte"
          />
          <label class="form-check-label" for="categoria-transporte"
            >Transporte</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Atendimento ao Cliente"
          />
          <label class="form-check-label" for="categoria-atendimento"
            >Atendimento ao Cliente</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Marketing"
          />
          <label class="form-check-label" for="categoria-marketing"
            >Marketing</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Financeiro"
          />
          <label class="form-check-label" for="categoria-financeiro"
            >Financeiro</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Logística"
          />
          <label class="form-check-label" for="categoria-logistica"
            >Logística</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Segurança"
          />
          <label class="form-check-label" for="categoria-seguranca"
            >Segurança</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="category"
            value="Serviços Gerais"
          />
          <label class="form-check-label" for="categoria-servicos"
            >Serviços Gerais</label
          >
        </div>
      </div>
    </div>

    <!-- Tipo -->
    <div class="pe-3">
      <div class="pe-3">
        <button
          class="text-start white-card p-1 px-3 filter-option d-flex justify-content-between align-items-center"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#filtro-tipo"
          aria-expanded="true"
          aria-controls="filtro-tipo"
          id="btn-tipo"
        >
          Tipo
          <i class="bi bi-chevron-down rotate-icon"></i>
        </button>
      </div>

      <div class="collapse show ps-3" id="filtro-tipo">
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="type"
            value="Emprego"
          />
          <label class="form-check-label" for="tipo1">Emprego</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="type"
            value="Estágio"
          />
          <label class="form-check-label" for="tipo2">Estágio</label>
        </div>
      </div>
    </div>

    <!-- Regime -->
    <div class="pe-3">
      <div class="pe-3">
        <button
          class="text-start white-card p-1 px-3 filter-option d-flex justify-content-between align-items-center"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#filtro-regime"
          aria-expanded="true"
          aria-controls="filtro-regime"
          id="btn-regime"
        >
          Regime
          <i class="bi bi-chevron-down rotate-icon"></i>
        </button>
      </div>

      <div class="collapse show ps-3" id="filtro-regime">
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="regime"
            value="Full-time"
          />
          <label class="form-check-label" for="regime1">Full-time</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            name="regime"
            value="Part-time"
          />
          <label class="form-check-label" for="regime2">Part-time</label>
        </div>
      </div>
    </div>

    <!-- Concelho -->
    <div class="pe-3">
      <div class="pe-3">
        <button
          class="text-start white-card p-1 px-3 filter-option d-flex justify-content-between align-items-center"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#filtro-concelho"
          aria-expanded="true"
          aria-controls="filtro-concelho"
          id="btn-concelho"
        >
          Concelho
          <i class="bi bi-chevron-down rotate-icon"></i>
        </button>
      </div>

      <div class="collapse show ps-3" id="filtro-concelho">
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Ponto do Sol"
          /><label class="form-check-label" for="pds">Ponta do Sol</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Calheta"
          /><label class="form-check-label" for="calheta">Calheta</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Ribeira Brava"
          /><label class="form-check-label" for="rb">Ribeira Brava</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Câmara de Lobos"
          /><label class="form-check-label" for="cl">Câmara de Lobos</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Funchal"
          /><label class="form-check-label" for="funchal">Funchal</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Santa Cruz"
          /><label class="form-check-label" for="sc">Santa Cruz</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Machico"
          /><label class="form-check-label" for="machico">Machico</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Santa Cruz"
          /><label class="form-check-label" for="santana">Santana</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="São Vicente"
          /><label class="form-check-label" for="sv">São Vicente</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Porto Moniz"
          /><label class="form-check-label" for="pm">Porto Moniz</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="municipality"
            type="checkbox"
            value="Porto Santo"
          /><label class="form-check-label" for="ps">Porto Santo</label>
        </div>
      </div>
    </div>

    <!-- Escolaridade -->
    <div class="pe-3">
      <div class="pe-3">
        <button
          class="text-start white-card p-1 px-3 filter-option d-flex justify-content-between align-items-center"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#filtro-escolaridade"
          aria-expanded="true"
          aria-controls="filtro-escolaridade"
          id="btn-escolaridade"
        >
          Escolaridade
          <i class="bi bi-chevron-down rotate-icon"></i>
        </button>
      </div>

      <div class="collapse show ps-3" id="filtro-escolaridade">
        <div class="form-check">
          <input
            class="form-check-input"
            name="education_level"
            type="checkbox"
            value="1º ciclo"
          /><label class="form-check-label" for="1c">1º ciclo</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="education_level"
            type="checkbox"
            value="2º ciclo"
          /><label class="form-check-label" for="2c">2º ciclo</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="education_level"
            type="checkbox"
            value="3º ciclo"
          /><label class="form-check-label" for="3c">3º ciclo</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="education_level"
            type="checkbox"
            value="Secundário"
          /><label class="form-check-label" for="sec">Secundário</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            name="education_level"
            type="checkbox"
            value="Ensino Superior"
          /><label class="form-check-label" for="es">Ensino Superior</label>
        </div>
      </div>
    </div>
  </form>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const buttons = document.querySelectorAll(".filter-option");

      buttons.forEach((button) => {
        const targetId = button
          .getAttribute("data-bs-target")
          ?.replace("#", "");
        const target = document.getElementById(targetId);
        const icon = button.querySelector(".rotate-icon");

        if (!target || !icon) return;

        target.addEventListener("show.bs.collapse", () => {
          icon.classList.add("rotated");
          button.classList.add("active-bold");
        });

        target.addEventListener("hide.bs.collapse", () => {
          icon.classList.remove("rotated");
          button.classList.remove("active-bold");
        });

        // Set initial state
        if (target.classList.contains("show")) {
          icon.classList.add("rotated");
          button.classList.add("active-bold");
        }
      });
    });
  </script>
</div>
