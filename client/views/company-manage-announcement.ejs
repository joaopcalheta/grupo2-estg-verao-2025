<!-- ../views/company-manage-announcement.ejs -->

<head>
  <link href="/css/general.css" rel="stylesheet" />
  <link href="/css/form.css" rel="stylesheet" />
</head>

<div class="container-ad">
  <h2 class="text-center my-4">Gerir An√∫ncio</h2>
  <form id="editAnuncioForm" method="POST" action="/company-manage-announcement/<%= announcement._id %>">
    <label
      >Nome da profiss√£o
      <input type="text" name="job_name" id="job_name" value="<%=announcement.job_name%>"/>
    </label>
    <label
      >Categoria
      <select name="category" id="category">
        <option>-- Selecione uma op√ß√£o --</option>
        <option value="Restaura√ß√£o" <%= announcement.category === 'Restaura√ß√£o' ? 'selected' : '' %>>Restaura√ß√£o</option>
        <option value="Limpeza" <%= announcement.category === 'Limpeza' ? 'selected' : '' %>>Limpeza</option>
        <option value="Constru√ß√£o" <%= announcement.category === 'Constru√ß√£o' ? 'selected' : '' %>>Constru√ß√£o</option>
        <option value="Vendedor" <%= announcement.category === 'Vendedor' ? 'selected' : '' %>>Vendedor</option>
        <option value="Sa√∫de" <%= announcement.category === 'Sa√∫de' ? 'selected' : '' %>>Sa√∫de</option>
        <option value="Educa√ß√£o" <%= announcement.category === 'Educa√ß√£o' ? 'selected' : '' %>>Educa√ß√£o</option>
        <option value="IT" <%= announcement.category === 'IT' ? 'selected' : '' %>>IT</option>
        <option value="Administra√ß√£o" <%= announcement.category === 'Administra√ß√£o' ? 'selected' : '' %>>Administra√ß√£o</option>
        <option value="Transporte" <%= announcement.category === 'Transporte' ? 'selected' : '' %>>Transporte</option>
        <option value="Atendimento ao Cliente" <%= announcement.category === 'Atendimento ao Cliente' ? 'selected' : '' %>>Atendimento ao Cliente</option>
        <option value="Marketing" <%= announcement.category === 'Marketing' ? 'selected' : '' %>>Marketing</option>
        <option value="Financeiro" <%=announcement.category==='Financeiro' ? 'selected' : '' %>>Financeiro</option>
        <option value="Log√≠stica" <%=announcement.category==='Log√≠stica' ? 'selected' : '' %>>Log√≠stica</option>
        <option value="Seguran√ßa" <%=announcement.category==='Seguran√ßa' ? 'selected' : '' %>>Seguran√ßa</option>
        <option value="Servi√ßos Gerais" <%=announcement.category==='Servi√ßos Gerais' ? 'selected' : '' %>>Servi√ßos Gerais
        </option>

      </select>
    </label>
    <label
      >Tipo de contrato
      <select name="type" id="type">
  <option value="">-- Selecione uma op√ß√£o --</option>
  <option value="Emprego" <%= announcement.type === 'Emprego' ? 'selected' : '' %>>Emprego</option>
  <option value="Est√°gio" <%= announcement.type === 'Est√°gio' ? 'selected' : '' %>>Est√°gio</option>
</select>

    </label>
    <label
      >Concelho
      <select name="municipality" id="municipality">
        <option value="">-- Selecione uma op√ß√£o --</option>
    <option value="Ponta do Sol" <%= announcement.municipality === 'Ponta do Sol' ? 'selected' : '' %>>Ponta do Sol</option>
  <option value="Calheta" <%= announcement.municipality === 'Calheta' ? 'selected' : '' %>>Calheta</option>
<option value="Ribeira Brava" <%= announcement.municipality === 'Ribeira Brava' ? 'selected' : '' %>>Ribeira Brava</option>
<option value="C√¢mara de Lobos" <%= announcement.municipality === 'C√¢mara de Lobos' ? 'selected' : '' %>>C√¢mara de Lobos</option>
<option value="Funchal" <%= announcement.municipality === 'Funchal' ? 'selected' : '' %>>Funchal</option>
<option value="Santa Cruz" <%= announcement.municipality === 'Santa Cruz' ? 'selected' : '' %>>Santa Cruz</option>
<option value="Machico" <%= announcement.municipality === 'Machico' ? 'selected' : '' %>>Machico</option>
<option value="Santana" <%= announcement.municipality === 'Santana' ? 'selected' : '' %>>Santana</option>
<option value="S√£o Vicente" <%= announcement.municipality === 'S√£o Vicente' ? 'selected' : '' %>>S√£o Vicente</option>
<option value="Porto Moniz" <%= announcement.municipality === 'Porto Moniz' ? 'selected' : '' %>>Porto Moniz</option>
<option value="Porto Santo" <%= announcement.municipality === 'Porto Santo' ? 'selected' : '' %>>Porto Santo</option>
</select>
  </label>
  <label>Freguesia
    <select name="freg" id="freguesia">
    <option value="">-- Selecione uma op√ß√£o --</option>
    <option value="Achadas da Cruz" <%= announcement.freg === 'Achadas da Cruz' ? 'selected' : '' %>>Achadas da Cruz</option>
    <option value="√Ågua de Pena" <%= announcement.freg === '√Ågua de Pena' ? 'selected' : '' %>>√Ågua de Pena</option>
<option value="Arco da Calheta" <%= announcement.freg === 'Arco da Calheta' ? 'selected' : '' %>>Arco da Calheta</option>
<option value="Arco de S√£o Jorge" <%= announcement.freg === 'Arco de S√£o Jorge' ? 'selected' : '' %>>Arco de S√£o Jorge</option>
<option value="Boaventura" <%= announcement.freg === 'Boaventura' ? 'selected' : '' %>>Boaventura</option>
<option value="Calheta" <%= announcement.freg === 'Calheta' ? 'selected' : '' %>>Calheta</option>
<option value="C√¢mara de Lobos" <%= announcement.freg === 'C√¢mara de Lobos' ? 'selected' : '' %>>C√¢mara de Lobos</option>
<option value="Campan√°rio" <%= announcement.freg === 'Campan√°rio' ? 'selected' : '' %>>Campan√°rio</option>
<option value="Canhas" <%= announcement.freg === 'Canhas' ? 'selected' : '' %>>Canhas</option>
<option value="Cani√ßal" <%= announcement.freg === 'Cani√ßal' ? 'selected' : '' %>>Cani√ßal</option>
<option value="Cani√ßo" <%= announcement.freg === 'Cani√ßo' ? 'selected' : '' %>>Cani√ßo</option>
<option value="Camacha" <%= announcement.freg === 'Camacha' ? 'selected' : '' %>>Camacha</option>
<option value="Curral das Freiras" <%= announcement.freg === 'Curral das Freiras' ? 'selected' : '' %>>Curral das Freiras</option>
<option value="Estreito da Calheta" <%= announcement.freg === 'Estreito da Calheta' ? 'selected' : '' %>>Estreito da Calheta</option>
<option value="Estreito de C√¢mara de Lobos" <%= announcement.freg === 'Estreito de C√¢mara de Lobos' ? 'selected' : '' %>>Estreito de C√¢mara de Lobos</option>
<option value="Faial" <%= announcement.freg === 'Faial' ? 'selected' : '' %>>Faial</option>
<option value="Faj√£ da Ovelha" <%= announcement.freg === 'Faj√£ da Ovelha' ? 'selected' : '' %>>Faj√£ da Ovelha</option>
<option value="Gaula" <%= announcement.freg === 'Gaula' ? 'selected' : '' %>>Gaula</option>
<option value="Ilha" <%= announcement.freg === 'Ilha' ? 'selected' : '' %>>Ilha</option>
<option value="Imaculado Cora√ß√£o de Maria" <%= announcement.freg === 'Imaculado Cora√ß√£o de Maria' ? 'selected' : '' %>>Imaculado Cora√ß√£o de Maria</option>
<option value="Jardim da Serra" <%= announcement.freg === 'Jardim da Serra' ? 'selected' : '' %>>Jardim da Serra</option>
<option value="Jardim do Mar" <%= announcement.freg === 'Jardim do Mar' ? 'selected' : '' %>>Jardim do Mar</option>
<option value="Machico" <%= announcement.freg === 'Machico' ? 'selected' : '' %>>Machico</option>
<option value="Madalena do Mar" <%= announcement.freg === 'Madalena do Mar' ? 'selected' : '' %>>Madalena do Mar</option>
<option value="Monte" <%= announcement.freg === 'Monte' ? 'selected' : '' %>>Monte</option>
<option value="Pa√∫l do Mar" <%= announcement.freg === 'Pa√∫l do Mar' ? 'selected' : '' %>>Pa√∫l do Mar</option>
<option value="Ponta Delgada" <%= announcement.freg === 'Ponta Delgada' ? 'selected' : '' %>>Ponta Delgada</option>
<option value="Ponta do Pargo" <%= announcement.freg === 'Ponta do Pargo' ? 'selected' : '' %>>Ponta do Pargo</option>
<option value="Ponta do Sol" <%= announcement.freg === 'Ponta do Sol' ? 'selected' : '' %>>Ponta do Sol</option>
<option value="Porto da Cruz" <%= announcement.freg === 'Porto da Cruz' ? 'selected' : '' %>>Porto da Cruz</option>
<option value="Porto Moniz" <%= announcement.freg === 'Porto Moniz' ? 'selected' : '' %>>Porto Moniz</option>
<option value="Porto Santo" <%= announcement.freg === 'Porto Santo' ? 'selected' : '' %>>Porto Santo</option>
<option value="Prazeres" <%= announcement.freg === 'Prazeres' ? 'selected' : '' %>>Prazeres</option>
<option value="Quinta Grande" <%= announcement.freg === 'Quinta Grande' ? 'selected' : '' %>>Quinta Grande</option>
<option value="Ribeira Brava" <%= announcement.freg === 'Ribeira Brava' ? 'selected' : '' %>>Ribeira Brava</option>
<option value="Ribeira da Janela" <%= announcement.freg === 'Ribeira da Janela' ? 'selected' : '' %>>Ribeira da Janela</option>
<option value="Santa Cruz" <%= announcement.freg === 'Santa Cruz' ? 'selected' : '' %>>Santa Cruz</option>
<option value="Santa Luzia" <%= announcement.freg === 'Santa Luzia' ? 'selected' : '' %>>Santa Luzia</option>
<option value="Santa Maria Maior" <%= announcement.freg === 'Santa Maria Maior' ? 'selected' : '' %>>Santa Maria Maior</option>
<option value="Santana" <%= announcement.freg === 'Santana' ? 'selected' : '' %>>Santana</option>
<option value="Santo Ant√≥nio" <%= announcement.freg === 'Santo Ant√≥nio' ? 'selected' : '' %>>Santo Ant√≥nio</option>
<option value="Santo Ant√≥nio da Serra (Machico)" <%= announcement.freg === 'Santo Ant√≥nio da Serra (Machico)' ? 'selected' : '' %>>Santo Ant√≥nio da Serra (Machico)</option>
<option value="Santo Ant√≥nio da Serra (Santa Cruz)" <%= announcement.freg === 'Santo Ant√≥nio da Serra (Santa Cruz)' ? 'selected' : '' %>>Santo Ant√≥nio da Serra (Santa Cruz)</option>
<option value="S√£o Gon√ßalo" <%= announcement.freg === 'S√£o Gon√ßalo' ? 'selected' : '' %>>S√£o Gon√ßalo</option>
<option value="S√£o Jorge" <%= announcement.freg === 'S√£o Jorge' ? 'selected' : '' %>>S√£o Jorge</option>
<option value="S√£o Martinho" <%= announcement.freg === 'S√£o Martinho' ? 'selected' : '' %>>S√£o Martinho</option>
<option value="S√£o Pedro" <%= announcement.freg === 'S√£o Pedro' ? 'selected' : '' %>>S√£o Pedro</option>
<option value="S√£o Roque" <%= announcement.freg === 'S√£o Roque' ? 'selected' : '' %>>S√£o Roque</option>
<option value="S√£o Roque do Faial" <%= announcement.freg === 'S√£o Roque do Faial' ? 'selected' : '' %>>S√£o Roque do Faial</option>
<option value="S√£o Vicente" <%= announcement.freg === 'S√£o Vicente' ? 'selected' : '' %>>S√£o Vicente</option>
<option value="Seixal" <%= announcement.freg === 'Seixal' ? 'selected' : '' %>>Seixal</option>
<option value="Serra de √Ågua" <%= announcement.freg === 'Serra de √Ågua' ? 'selected' : '' %>>Serra de √Ågua</option>
<option value="S√©" <%= announcement.freg === 'S√©' ? 'selected' : '' %>>S√©</option>
<option value="Tabua" <%= announcement.freg === 'Tabua' ? 'selected' : '' %>>Tabua</option>

  </select>
  </label>
  <label
      >Morada
      <input type="text" name="address" id="address" value="<%=announcement.address%>"/>
    </label>
    <label
      >C√≥digo postal
      <input type="text" name="postcode" id="postcode" value="<%=announcement.postcode%>"/>
    </label>
    <label>
  Regime
  <select name="regime" id="regime">
    <option value="">-- Selecione uma op√ß√£o --</option>
    <option value="Full-Time" <%= announcement.regime === 'Full-Time' ? 'selected' : '' %>>Full-Time</option>
    <option value="Part-Time" <%= announcement.regime === 'Part-Time' ? 'selected' : '' %>>Part-Time</option>
  </select>
</label>

<label>
  Escolaridade
  <select name="education_level" required>
    <option value="">Selecione uma op√ß√£o</option>
    <option value="ensino b√°sico" <%= announcement.education_level === 'ensino b√°sico' ? 'selected' : '' %>>Ensino b√°sico</option>
    <option value="ensino secund√°rio" <%= announcement.education_level === 'ensino secund√°rio' ? 'selected' : '' %>>Ensino secund√°rio</option>
    <option value="ensino superior" <%= announcement.education_level === 'ensino superior' ? 'selected' : '' %>>Ensino superior</option>
  </select>
</label>

<div class="mb-3">
  <label>L√≠nguas</label>
  <div class="d-flex flex-wrap gap-3">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Eng" id="lingua-ingles"
        <%= announcement.languages && announcement.languages.includes('Eng') ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-ingles">Ingl√™s</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Fr" id="lingua-frances"
        <%= announcement.languages && announcement.languages.includes('Fr') ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-frances">Franc√™s</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Esp" id="lingua-espanhol"
        <%= announcement.languages && announcement.languages.includes('Esp') ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-espanhol">Espanhol</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Ger" id="lingua-alemao"
        <%= announcement.languages && announcement.languages.includes('Ger') ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-alemao">Alem√£o</label>
    </div>
  </div>
  
</div>

    <label
      >Sal√°rio
      <input type="text" name="salary" required value="<%= announcement.salary%>" />
    </label>

    <label>Hor√°rio de trabalho</label>
    <div class="d-inline-flex p-2 gap-5">
      <div class="form-group">
        <label for="inicio">Hor√°rio de In√≠cio:</label>
        <input type="time" id="inicio" name="schedule[startTime]" value="<%= announcement.schedule['startTime'] %>" />
      </div>

      <div class="form-group">
        <label for="fim">Hor√°rio de T√©rmino:</label>
        <input type="time" id="fim" name="schedule[endTime]" value="<%= announcement.schedule['endTime'] %>" />
      </div>
    </div>

    <label
      >Prazo de candidatura
      <input type="text" name="end_date" value="<%=announcement.end_date%>" required />
    </label>
    <label
    >N√∫mero de vagas
      <input type="number" 
      name="numberOfPositions" 
      min="1" value="<%= announcement.numberOfPositions %>">
    </label>
    <label>
  Descri√ß√£o
  <textarea name="description" rows="5" id="description"><%= announcement.description %></textarea>
</label>

    <label
      >Alterar foto
      <label>
        <input type="text" name="pic" value="<%= announcement.pic %>" />
      </label>
    </label>


    <div class="actions-btn">
      <button type="button" class="btn btn-black" onclick="history.back()">
        Voltar
      </button>
      <button type="submit" class="btn btn-blue">Guardar</button>
    </div>

  </form>
  </br>  
    <!-- O form para eliminar necessita estar fora do form principal para funcionar-->
    <form id="deleteForm" method="POST" action="/company-manage-announcement/<%= announcement._id %>?_method=DELETE">
    <div class="actions-btn">
      <button id="deletebtn" type="button" class="btn btn-delete">
        Eliminar üóëÔ∏è
      </button>
    </div>
    </form>

</div>

<div class="modal" id="confirmModal" style="display: none;">
  <span class="close" onclick="closeModal()">&times;</span>
  <div class="icon">!</div>
  <h2>Tem certeza?</h2>
  <p>Voc√™ est√° prestes a excluir seu an√∫ncio. Esta a√ß√£o n√£o pode ser desfeita.</p>
  <div class="buttons">
    <button class="btn-black btn-small" onclick="document.getElementById('deleteForm').submit()">Sim, excluir</button>
    <button class="btn-cancel btn-small" onclick="closeModal()">Cancelar</button>
  </div>
</div>

<!-- Script -->
<script>
  document.getElementById("deletebtn").addEventListener("click", () => {
    document.getElementById("confirmModal").style.display = "block";
  });
  function closeModal() {
    document.getElementById("confirmModal").style.display = "none";
  }
</script>

