<head>
  <link href="/css/client-submit.css" rel="stylesheet" />
  <link href="/css/general.css" rel="stylesheet" />
  <link href="/css/form.css" rel="stylesheet" />

</head>
<form action="/submit-application/" method="POST">
<div class="container-ad">
  <h2 class="text-center fw-bold my-5">Candidatura</h2>
  <div class="dados">
    <label class="fw-bold">Nome completo
      <input type="text" name="name" value="<%= user ? user.name : '' %>" required/>
    </label>
    <br />
    <label class="fw-bold">Data de Nascimento
      <input
        class="form-group"
        type="date"
        name="birthdate"
        value="<%= user && user.birthdate ? user.birthdate.toISOString().substring(0, 10) : '' %>"
      />
    </label>
    <br />
    <label class="fw-bold">Nº de Telefone
      <input type="tel" name="phone" value="<%= user ? user.phone : '' %>"required/>
    </label>
    <br />
    <label class="fw-bold">NIF
      <input type="text" name="nif" value="<%= user ? user.nif : '' %>" required/>
    </label>
    <br />
    <label class="fw-bold">E-mail
      <input type="text" name="email" value="<%= user ? user.email : '' %>" required/>
    </label>
    <br />
    <label class="fw-bold">Morada
      <input type="text" name="address" value="<%= user ? user.address : '' %>" required/>
    </label>
    <br />
    <label class="fw-bold">Localidade
      <input type="text" name="municipality" value="<%= user ? user.municipality : '' %>" required/>
    </label>
    <br />
    <label class="fw-bold">Código Postal
      <input type="text" name="postcode" value="<%= user ? user.postcode : '' %>" required/>
    </label>
    <br>
    <!-- Escolaridade -->
    <div class="escolaridade">
      <label class="fw-bold">Escolaridade
        <select id="escolaridade" name="education_level" >
          <option value="selecione" <%= (!profile || !profile.education_level) ? 'selected' : '' %> >Selecione o nível de escolaridade</option>
          <option value="basico" <%= profile && profile.education_level === 'basico' ? 'selected' : '' %> >Ensino Básico</option>
          <option value="secundario" <%= profile && profile.education_level === 'secundario' ? 'selected' : '' %> >Ensino Secundário</option>
          <option value="licenciatura" <%= profile && profile.education_level === 'licenciatura' ? 'selected' : '' %>>Licenciatura</option>
          <option value="mestrado" <%= profile && profile.education_level === 'mestrado' ? 'selected' : '' %>>Mestrado</option>
          <option value="doutoramento" <%= profile && profile.education_level === 'doutoramento' ? 'selected' : '' %>>Doutoramento</option>
        </select>
      </label>
    </div>
    <br />
<style>
  /* Força o estilo padrão de checkbox */
  .form-check-input[type="checkbox"] {
    appearance: checkbox;
    -webkit-appearance: checkbox;
    -moz-appearance: checkbox;
    width: auto;
    height: auto;
    margin-top: 0.3em;
  }
</style>

<div class="mb-3">
  <h6 class=" fw-bold mb-2">Línguas</h6>
  <div class="d-flex flex-wrap gap-3"> 
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Inglês" id="lingua-ingles"
        <%= profile && profile.languages?.includes("Inglês") ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-ingles">Inglês</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Francês" id="lingua-frances"
        <%= profile && profile.languages?.includes("Francês") ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-frances">Francês</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Espanhol" id="lingua-espanhol"
        <%= profile && profile.languages?.includes("Espanhol") ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-espanhol">Espanhol</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="languages[]" value="Alemão" id="lingua-alemao"
        <%= profile && profile.languages?.includes("Alemão") ? 'checked' : '' %>>
      <label class="form-check-label" for="lingua-alemao">Alemão</label>
    </div>
  </div>
</div>
  <br />
<div>
  <label class="fw-bold">Competências
    <input type="text" name="skills"
      value="<%= Array.isArray(profile?.skills) ? profile.skills.join(', ') : '' %>" />
  </label> 
</div>    
  <br />
<div class="sobre">
  <label class="fw-bold">Sobre mim 
    <textarea rows="5" name="about_me" style="white-space: pre-wrap;"><%= profile?.about_me || '' %></textarea>
  </label>  
</div>
  <br />
<div>
  <h6 class="fw-bold mb-2" id="cv">Anexar CV:</h6>   
    <input type="file" name="cv" class="d-none" id="fileInput" />
    <label for="fileInput" class="btn btn-primary">
      <i class="bi bi-upload"></i> Enviar arquivo
    </label>
</div>
<!-- Passar announcementId escondido no formulario-->
<input type="hidden" name="announcement_id" value="<%= announcementId %>">

<div class="actions-btn">
  <button type="button" class="btn btn-blue" onclick="window.location.href='/'">
    Voltar
  </button>
  <button type="submit" class="btn btn-blue">Enviar</button>
  </div>
  </div>
</div>
</form>
